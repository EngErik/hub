{"name":"Hub","tagline":"Fault tolerant, highly available service for data storage and distribution.","body":"The Hub\r\n=======\r\n\r\n* [overview](#overview)\r\n* [consistency](#consistency)\r\n* [clients](#clients)\r\n* [error handling](#error-handling)\r\n* [FAQ](#faq)\r\n* [hub resources](#hub-resources)\r\n* [list channels](#list-channels)\r\n* [create a channel](#create-a-channel)\r\n* [update a channel](#update-a-channel)\r\n* [fetch channel metadata](#fetch-channel-metadata)\r\n* [insert content into channel](#insert-content-into-channel)\r\n* [fetch content from channel](#fetch-content-from-channel)\r\n* [latest channel item](#latest-channel-item)\r\n* [earliest channel item](#earliest-channel-item)\r\n* [next and previous links](#next-and-previous-links)\r\n* [channel status](#channel-status)\r\n* [channel limits](#channel-limits)\r\n* [tag interface](#tag-interface)\r\n* [tag unions](#tag-unions)\r\n* [time interface](#time-interface)\r\n* [subscribe to events](#subscribe-to-events)\r\n* [group callback](#group-callback)\r\n* [provider interface](#provider-interface)\r\n* [delete a channel](#delete-a-channel)\r\n* [replication](#replication)\r\n* [alerts](#alerts)\r\n* [health check](#health-check)\r\n* [access control](#access-control)\r\n* [encrypted-hub](#encrypted-hub)\r\n* [monitoring](#monitoring)\r\n* [development](#development)\r\n* [deployments](#deployments)\r\n* [Requirements Notes](#Requirements-Notes)\r\n\r\n\r\n\r\n## overview\r\n\r\nThe Hub is designed to be a fault tolerant, highly available service for data storage and distribution.  All features are available via a REST API.\r\n\r\nIt supports channels of data ordered by time.\r\nChannels represent uniquely addressable items that are iterable and query-able by time.  Each item may be up to to 20 MB.\r\n\r\nThe [encrypted-hub](#encrypted-hub) (EH) is a separate installation of the Hub which ensures that all communication is encrypted.\r\n\r\n## consistency\r\n\r\n* All times from the Hub are in UTC.\r\n* By default all iteration, queries, group callbacks and websockets return items with stable ordering.  Data is considered stable when iteration will provide consistent results.\r\n* All requests for a specific item by id will return that item if it exists.\r\n\r\n## error handling\r\n\r\nClients should consider handling transient server errors (500 level return codes) with retry logic.  This helps to ensure that transient issues (networking, etc)\r\n  do not prevent the client from entering data. For Java clients, this framework provides many options - https://github.com/rholder/guava-retrying\r\nWe also recommend clients use exponential backoff for retries.\r\n\r\n## FAQ\r\n\r\n* Why does /latest (or /earliest) return 404?\r\n\r\n  Either data has never been added to that channel, or the last data added to that channel is older than the time to live (ttlDays).\r\n\r\n* How can I guarantee ordering for items within a channel?\r\n\r\n  You can wait for the response for an item before writing the next item.  \r\n\r\n## hub resources\r\n\r\nTo explore the Resources available in the Hub, go to http://hub/\r\n\r\n**Note**\r\nFor the purposes of this document, the Hub is at http://hub/.\r\nOn your local machine it is at: http://localhost:9080/\r\n\r\n## list channels\r\n\r\nTo obtain the list of channels:\r\n\r\n`GET http://hub/channel`\r\n\r\nOn success:  `HTTP/1.1 200 OK`\r\nContent-Type is `application/json`\r\n\r\n```json\r\n{\r\n  \"_links\" : {\r\n    \"self\" : {\r\n      \"href\" : \"http://hub/channel\"\r\n    },\r\n    \"channels\" : [ {\r\n      \"name\" : \"stumptown\",\r\n      \"href\" : \"http://hub/channel/stumptown\"\r\n    }, {\r\n      \"name\" : \"ptown\",\r\n      \"href\" : \"http://hub/channel/ptown\"\r\n    } ]\r\n  }\r\n}\r\n```\r\n    \r\n## create a channel\r\n\r\n* `name` _is case sensitive_, is limited to _48 characters_, and may only contain `a-z`, `A-Z`, `0-9` and underscore `_`.\r\nHyphens are not allowed in channel names. Surrounding white space is trimmed (e.g. \"  foo  \" -> \"foo\" ).\r\n\r\n* `ttlDays` and `maxItems` are optional, and only one can be specified at a time. If neither is specified, a default value of 120 ttlDays is used.\r\nPlease see [channel limits](#channel-limits) for more details.\r\n\r\n* `description` is optional and defaults to an empty string.  This text field can be up to 1024 bytes long.\r\n\r\n* `tags` is an optional array of string values.  Tag values are limited to 48 characters, and may only contain `a-z`, `A-Z` and `0-9`.\r\nA channel may have at most 20 tags.\r\n\r\n* `replicationSource` is the optional fully qualified path to channel in a another hub.  The data from the other channel\r\nwill be duplicated into this channel.  Please see [replication](#replication) for more details.\r\n\r\n`PUT http://hub/channel/stumptown`\r\n\r\n* Content-type: application/json\r\n\r\n```json\r\n{\r\n   \"ttlDays\": \"14\",\r\n   \"description\": \"a sequence of all the coffee orders from stumptown\",\r\n   \"tags\": [\"coffee\"]\r\n}\r\n```\r\n\r\nOn success:  `HTTP/1.1 201 OK`\r\n\r\n```json\r\n{\r\n    \"_links\": {\r\n        \"self\": {\r\n            \"href\": \"http://hub/channel/stumptown\"\r\n        },\r\n        \"latest\": {\r\n            \"href\": \"http://hub/channel/stumptown/latest\"\r\n        },\r\n        \"earliest\": {\r\n            \"href\": \"http://hub/channel/stumptown/earliest\"\r\n        },\r\n        \"ws\": {\r\n            \"href\": \"ws://hub/channel/stumptown/ws\"\r\n        },\r\n        \"time\": {\r\n            \"href\": \"http://hub/channel/stumptown/time\"\r\n        },\r\n        \"status\" : {\r\n              \"href\" : \"http://hub/channel/load_test_1/status\"\r\n        }\r\n    },\r\n    \"name\": \"stumptown\",\r\n    \"creationDate\": \"2013-04-23T20:25:33.434Z\",\r\n    \"ttlDays\": 14,\r\n    \"description\": \"a sequence of all the coffee orders from stumptown\",\r\n    \"tags\": [\"coffee\"],\r\n    \"replicationSource\": \"\"\r\n}\r\n```\r\n\r\nHere's how you can do this with curl:\r\n```bash\r\ncurl -i -X PUT http://hub/channel/stumptown\r\n\r\nor\r\n\r\ncurl -i -X PUT --header \"Content-type: application/json\"  --data '{ \"description\" : \"stumpy\", \"ttlDays\" : 1 }' http://localhost:9080/channel/stumptown\r\n```\r\n\r\n## update a channel\r\n\r\nSome channel metadata can be updated. The update format looks much like the channel create format\r\n(currently, only `ttlDays`, `description`, `tags` and `replicationSource` can be updated).\r\nEach of these fields is optional.\r\n\r\n`PUT http://hub/channel/channelname`\r\n\r\n## fetch channel metadata\r\n\r\nTo fetch metadata about a channel, do a GET on its `self` link:\r\n\r\n`GET http://hub/channel/stumptown`\r\n\r\nOn success: `HTTP/1.1 200 OK`  (see example return data from create channel).\r\n\r\nHere's how you can do this with curl:\r\n\r\n`curl http://hub/channel/stumptown`\r\n\r\n## insert content into channel\r\n\r\nTo insert data to a channel, issue a POST on the channel's `self` URI and specify the appropriate\r\ncontent-type header (all content types should be supported).  The `Content-Encoding` header is optional:\r\n\r\n```\r\nPOST http://hub/channel/stumptown\r\nContent-type: text/plain\r\nContent-Encoding: gzip\r\nAccept: application/json\r\n___body_contains_arbitrary_content\r\n```\r\n\r\nOn success: `HTTP/1.1 201 Created`\r\n\r\n`Location: http://hub/channel/stumptown/2013/04/23/20/42/31/749/{hash}`\r\n\r\n```json\r\n{\r\n  \"_links\" : {\r\n    \"channel\" : {\r\n      \"href\" : \"http://hub/channel/stumptown\"\r\n    },\r\n    \"self\" : {\r\n      \"href\" : \"http://hub/channel/stumptown/2013/04/23/20/42/31/749/{hash}\"\r\n    }\r\n  },\r\n  \"timestamp\" : \"2013-04-23T20:42:31.146Z\"\r\n}\r\n```\r\n\r\nHere's how you could do this with curl:\r\n\r\n```bash\r\ncurl -i -X POST --header \"Content-type: text/plain\" --data 'your content here' http://hub/channel/stumptown\r\n```\r\n\r\n## fetch content from channel\r\n\r\nTo fetch content that was stored into a hub channel, do a `GET` on the `self` link in the above response:\r\n\r\n`GET http://hub/channel/stumptown/2013/04/23/20/42/31/749/{hash}`\r\n\r\nOn success: `HTTP/1.1 200 OK`\r\n```\r\nContent-Type: text/plain\r\nCreation-Date: 2013-04-23T00:21:30.662Z\r\nLink: <http://hub/channel/stumptown/2013/04/23/20/42/31/749/{hash}/previous>;rel=\"previous\"\r\nLink: <http://hub/channel/stumptown/2013/04/23/20/42/31/749/{hash}/next>;rel=\"next\"\r\n...other.headers...\r\n\r\nyour content here\r\n```\r\n\r\nNote: The `Content-Type` will match the Content-Type used when inserting the data.  \r\nThere are two `Link` headers that provide links to the previous and next items in the channel.\r\nThe `Creation-Date` header will correspond to when the data was inserted into the channel.\r\n\r\nHere's how you can do this with curl:\r\n\r\n`curl -i http://hub/channel/stumptown/2013/04/23/20/42/31/749/{hash}`\r\n\r\n## fetch latest channel item\r\n\r\nTo retrieve the latest item inserted into a channel, issue a HEAD or GET request on the `latest` link \r\nreturned from the channel metadata.  The Hub will issue a 303 redirect.\r\n\r\n`HEAD http://hub/channel/stumptown/latest`\r\n\r\nOn success:  `HTTP/1.1 303 See Other`\r\n`Location: http://hub/channel/stumptown/2013/04/23/20/42/31/749/{hash}`\r\n\r\nHere is how you can do this with curl:\r\n\r\n`curl -I http://hub/channel/stumptown/latest`\r\n\r\nYou can also retrieve the latest N items by using /latest/{n}\r\n\r\n## fetch earliest channel item\r\n\r\nTo retrieve the earliest item inserted into a channel, issue a HEAD or GET request on the `earliest` link \r\nreturned from the channel metadata.  The Hub will issue a 303 redirect.\r\n\r\n`HEAD http://hub/channel/stumptown/earliest`\r\n\r\nOn success:  `HTTP/1.1 303 See Other`\r\n`Location: http://hub/channel/stumptown/2013/04/23/20/42/31/749/{hash}`\r\n\r\nHere is how you can do this with curl:\r\n\r\n`curl -I http://hub/channel/stumptown/earliest`\r\n\r\nYou can also retrieve the earliest N items by using /earliest/{n}\r\n\r\n## next and previous links\r\n\r\nA GET on the next and previous links returned as headers with content will redirect to those respective items.  A 404 will be returned if they don't exist.\r\n\r\nAny item's uri can be appended with /next or /previous to navigate forward or backward.\r\nIf you append a number /next/20 or /previous/15, and you'll receive a list of that many items.\r\n\r\nFor example:\r\n\r\n`GET http://hub/channel/stumptown/2014/12/23/23/14/50/514/xIXX5L/previous/10`\r\n\r\nOn success: `HTTP/1.1 200 OK`\r\n```\r\n{\r\n  \"_links\" : {\r\n    \"self\" : {\r\n      \"href\" : \"http://hub/channel/stumptown/2014/12/23/23/14/50/514/xIXX5L/previous/10\"\r\n    },\r\n    \"next\" : {\r\n      \"href\" : \"http://hub/channel/stumptown/2014/12/23/23/14/49/887/x46z8p/next/10\"\r\n    },\r\n    \"previous\" : {\r\n      \"href\" : \"http://hub/channel/stumptown/2014/12/23/23/14/42/751/mRklXw/previous/10\"\r\n    },\r\n    \"uris\" : [\r\n        \"http://hub/channel/stumptown/2014/12/23/23/14/42/751/mRklXw\", \r\n        \"http://hub/channel/stumptown/2014/12/23/23/14/43/339/CJ9mt9\", \r\n        \"http://hub/channel/stumptown/2014/12/23/23/14/44/163/LzhylF\", \r\n        \"http://hub/channel/stumptown/2014/12/23/23/14/44/588/zDygpg\", \r\n        \"http://hub/channel/stumptown/2014/12/23/23/14/45/105/ZuJUmM\", \r\n        \"http://hub/channel/stumptown/2014/12/23/23/14/45/972/qeKDF6\", \r\n        \"http://hub/channel/stumptown/2014/12/23/23/14/46/703/Jm09Un\", \r\n        \"http://hub/channel/stumptown/2014/12/23/23/14/47/376/swdWJD\", \r\n        \"http://hub/channel/stumptown/2014/12/23/23/14/48/115/lDCHYY\", \r\n        \"http://hub/channel/stumptown/2014/12/23/23/14/49/887/x46z8p\" \r\n        ]\r\n  }\r\n}\r\n```\r\n\r\n## channel status\r\n\r\nA GET on the status link for a channel will return the link to the latest item in the channel.\r\nIf a replicationSource is defined, it will also return the link the the latest in the replication hub.\r\n\r\n`GET http://hub/channel/stumptown/status`\r\n\r\nOn success: `HTTP/1.1 200 OK`\r\n```\r\n{\r\n    \"_links\": {\r\n        \"self\": {\r\n            \"href\": \"http://hub/channel/stumptown/status\"\r\n        },\r\n        \"latest\": {\r\n            \"href\": \"http://hub/channel/stumptown/2015/01/23/17/33/08/895/1524\"\r\n        },\r\n        \"replicationSourceLatest\": {\r\n            \"href\": \"http://hub-other/channel/stumptown/1526\"\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n## channel limits\r\n\r\n`ttlDays` and `maxItems` are mutually exclusive.  When one field is set, the other must be 0 (zero).\r\n\r\n`ttlDays` is used to limit the number of items in a channel by time.\r\nThe hub strictly enforces the time limit for range queries, and is less strict for indivdual items.\r\n\r\nFor example, if a channel has ttlDays = 3, and you query `/earliest/10', the results returned will be limited to 3 days ago from now.\r\nEach item returned will be available for 15 minutes after the ttl has expired.\r\n\r\n`maxItems` has a limit of 5000 items.  It is intended to be useful for channels that are updated infrequently.\r\nOnce a channel has reached its maxItems, older items will be removed.  maxItems should be considered eventually consistent.\r\n \r\nFor eaxmple, if you quickly insert 1,000 items into a channel with maxItems = 50, a query of `/latest/100` will return 100 items.\r\n Within 12 hours, the limit of 50 will be enforced.\r\n\r\nIf you change a channel from ttlDays to maxItems, it will also take up to 12 hours for the limit to be enforced.\r\n\r\n## tag interface\r\n\r\nTags are used to logically group channels.  To retrieve all of the tags in the Hub:\r\n\r\n`GET http://hub/tag`\r\n\r\nOn success: `HTTP/1.1 200 OK`\r\n```json\r\n{\r\n  \"_links\" : {\r\n    \"self\" : {\r\n      \"href\" : \"http://hub/tag\"\r\n    },\r\n    \"tags\" : [ {\r\n      \"name\" : \"orders\",\r\n      \"href\" : \"http://hub/tag/orders\"\r\n    }, {\r\n      \"name\" : \"coffee\",\r\n      \"href\" : \"http://hub/tag/coffee\"\r\n    } ]\r\n  }\r\n}\r\n```\r\n\r\nAny of the returned tag links can be followed to see all of the channels with that tag:\r\n\r\n`GET http://hub/tag/coffee`\r\n\r\nOn success: `HTTP/1.1 200 OK`\r\n```json\r\n{\r\n  \"_links\" : {\r\n    \"self\" : {\r\n      \"href\" : \"http://hub/tag/coffee\"\r\n    },\r\n    \"latest\": {\r\n        \"href\": \"http://hub/tag/coffee/latest\"\r\n    },\r\n    \"earliest\": {\r\n        \"href\": \"http://hub/tag/coffee/earliest\"\r\n    },\r\n    \"time\": {\r\n        \"href\": \"http://hub/tag/coffee/time\"\r\n    },\r\n    \"channels\" : [ {\r\n      \"name\" : \"stumptown\",\r\n      \"href\" : \"http://hub/channel/stumptown\"\r\n    }, {\r\n      \"name\" : \"spella\",\r\n      \"href\" : \"http://hub/channel/spella\"\r\n    } ]\r\n  }\r\n}\r\n```\r\n\r\n## tag unions\r\n\r\nTags can also be used for a read-only union set of all it's channels.\r\n[next and previous links](#next-and-previous-links), [latest](#latest-channel-item), \r\n[earliest](#earliest-channel-item) and [time](#time-interface) work the same as their channel analogs.\r\nTag operations can be accessed through /tag/{tag-name} or /channel/{channel-name}/\r\n\r\nExample operations:\r\n```\r\nGET http://hub/tag/coffee/latest\r\nGET http://hub/tag/coffee/earliest\r\nGET http://hub/tag/coffee/2015/06/25/16\r\nGET http://hub/tag/coffee/2015/06/24/19/48/17/000/abc/previous\r\nGET http://hub/tag/coffee/2015/06/24/19/48/17/000/abc/next/10\r\nGET http://hub/channel/spella/2015/06/24/19/48/17/000/abc/next/10?tag=coffee\r\n```\r\nOperations through the channel interface (/channel/{channel-name}/) can a tag parameter.  Using the tag parameter allows the user to stay in the tag context.\r\n\r\nFor example:\r\n\r\n`GET http://hub/tag/coffee/latest`\r\n\r\nreturns a redirect to\r\n\r\n`http://hub/channel/spella/2015/06/24/19/48/17/000/abc?tag=coffee`\r\n\r\nFollowing the previous on that item and including the tag\r\n\r\n`http://hub/channel/spella/2015/06/24/19/48/17/000/abc/previous?tag=coffee`\r\n\r\nreturns a redirect to an item on a different channel\r\n\r\n`http://hub/channel/stumptown/2015/06/24/19/40/17/000/qwe?tag=coffee`\r\n\r\n## time interface\r\n\r\nThe time interface provides a variety of options to query data in a hub channel.  All queries will only show items\r\n with stable ordering by default.  If you want to see items which might be unstable, add the parameter ```?stable=false```\r\n\r\nTo see time format options, issue a GET request on the `time` link returned from the channel metadata.\r\n\r\n`GET http://hub/channel/stumptown/time`\r\n\r\n```json\r\n{\r\n    \"_links\": {\r\n        \"self\": {\r\n            \"href\": \"http://hub/channel/stumptown/time\"\r\n        },\r\n        \"second\": {\r\n            \"href\": \"http://hub/channel/stumptown/2014/12/23/05/58/55\",\r\n            \"template\": \"http://hub/channel/stumptown/time/{year}/{month}/{day}/{hour}/{minute}/{second}{?stable}\",\r\n            \"redirect\": \"http://hub/channel/stumptown/time/second\"\r\n        },\r\n        \"minute\": {\r\n            \"href\": \"http://hub/channel/stumptown/2014/12/23/05/58\",\r\n            \"template\": \"http://hub/channel/stumptown/time/{year}/{month}/{day}/{hour}/{minute}{?stable}\",\r\n            \"redirect\": \"http://hub/channel/stumptown/time/minute\"\r\n        },\r\n        \"hour\": {\r\n            \"href\": \"http://hub/channel/stumptown/2014/12/23/05\",\r\n            \"template\": \"http://hub/channel/stumptown/time/{year}/{month}/{day}/{hour}{?stable}\",\r\n            \"redirect\": \"http://hub/channel/stumptown/time/hour\"\r\n        },\r\n        \"day\": {\r\n            \"href\": \"http://hub/channel/stumptown/2014/12/23\",\r\n            \"template\": \"http://hub/channel/stumptown/time/{year}/{month}/{day}{?stable}\",\r\n            \"redirect\": \"http://hub/channel/stumptown/time/day\"\r\n        }\r\n    },\r\n    \"now\": {\r\n        \"iso8601\": \"2014-12-23T05:59:00.162Z\",\r\n        \"millis\": 1419314340162\r\n    },\r\n    \"stable\": {\r\n        \"iso8601\": \"2014-12-23T05:58:55.000Z\",\r\n        \"millis\": 1419314335000\r\n    }\r\n}\r\n```\r\n\r\nCall a named uri, and the Hub will issue a 303 redirect for the current time with the specified resolution.\r\n\r\n`HEAD http://localhost:9080/channel/stumptown/time/second`\r\n\r\nOn success:  `HTTP/1.1 303 See Other`\r\n`Location: http://hub/channel/stumptown/2014/01/13/10/42/31\r\n\r\nA GET on the returned Location will return all of the content URIs within that period.\r\n\r\n`GET http://hub/channel/stumptown/2014/01/13/10/42/31`\r\n\r\nOn success:  `HTTP/1.1 200 OK`\r\nContent-Type is `application/json`\r\n\r\n```json\r\n{\r\n  \"_links\" : {\r\n    \"self\" : {\r\n      \"href\" : \"http://hub/channel/stumptown/2014/01/13/10/42/31\"\r\n    },\r\n    \"uris\" : [ \r\n        \"http://hub/channel/stumptown/2014/01/13/10/42/31/149/{hash1}\", \r\n        \"http://hub/channel/stumptown/2014/01/13/10/42/31/359/{hash2}\",\r\n        \"http://hub/channel/stumptown/2014/01/13/10/42/31/642/{hash3}\" \r\n    ]\r\n  }\r\n```\r\n\r\nIf no items were submitted during that time, 'uris' is an empty array.\r\nIf the time requested is the current minute, 'uri's will reflect all of the items inserted within the minute so far, and will\r\nincrease as other items are inserted.\r\n\r\n### time resolution\r\n\r\nYou can request all of the items by the time resolution you specify in the URL.  \r\nFor all the items in a minute: `GET http://hub/channel/stumptown/2014/01/13/10/42`\r\nFor all the items in an hour: `GET http://hub/channel/stumptown/2014/01/13/10`\r\n\r\nYou can also access the urls via convenience methods:\r\n\r\n`HEAD http://hub/channel/stumptown/time/minute`\r\n`HEAD http://hub/channel/stumptown/time/hour`\r\n\r\nThe output format is the same regardless of time resolution\r\n\r\n## subscribe to events\r\n\r\nClients may \"subscribe\" to single channel events by listening on a channel's websocket.  \r\nIn the channel metadata there is a `ws` link, and a websocket aware client may connect to this URL.\r\n\r\nClients should be aware that websockets are a \"best effort\" service, and are not stateful.  If the ws connection is lost,\r\nwhich will happen on hub server restarts, the client will need to reconnect, and may have missed items.\r\n\r\nOnce connected, the line-oriented protocol is simple:\r\n\r\nEach time data is inserted into the channel, the hub will send a line to the client with the\r\nURL for that content.\r\n\r\n```\r\nhttp://hub/channel/stumptown/2014/01/13/10/42/31/149/{hash1}\r\nhttp://hub/channel/stumptown/2014/01/13/10/42/31/359/{hash2}\r\nhttp://hub/channel/stumptown/2014/01/13/10/42/31/642/{hash3}\r\n...etc...\r\n```\r\n\r\nThe returned items are stable only.\r\n\r\n## group callback\r\n\r\nThe Group Callback mechanism is an alternative to WebSockets for consuming events.  This POSTs json uris via HTTP, and\r\nthe Hub server keeps track of the Group's state.\r\n\r\n* `name` is used in the url for the callback.  Names are limited to 48 characters and may only contain `a-z`, `A-Z`, `0-9` and underscore `_`.\r\n\r\n* `callbackUrl` is the fully qualified location to receive callbacks from the server.\r\n\r\n* `channelUrl` is the fully qualified channel location to monitor for new items.\r\n\r\n* `parallelCalls` is the optional number of callbacks to make in parallel.  The default value is `1`.\r\nIf parallelCalls is higher than one, callback ordering is not guaranteed.\r\n\r\n* `startItem` is the optional fully qualified item location where the callback should start from.  The startItem will not be sent.\r\nstartItem is *only* used when creating a group callback.  If you want to change the pointer of a callback, you will need to\r\ndelete the callback first.\r\n\r\nTo get a list of existing group callbacks:\r\n\r\n`GET http://hub/group`\r\n \r\nTo create a new group callback:\r\n\r\n`PUT http://hub/group/{name}`\r\n\r\n``` json\r\n{\r\n  \"callbackUrl\" : \"http://client/path/callback\",\r\n  \"channelUrl\" : \"http://hub/channel/stumptown\",\r\n  \"parallelCalls\" : 2,\r\n  \"startItem\" : \"http://hub/channel/stumptown/2015/02/06/22/28/43/239/s03ub2\"\r\n}\r\n```\r\n\r\nOnce a Group is created, it can not be changed, only deleted.  PUT may be safely called multiple times with the same\r\n configuration.  Changes to `startItem` will be ignored.\r\n\r\nTo see the configuration and status of a group callback:\r\n\r\n`GET http://hub/group/{name}`\r\n\r\nTo delete a group callback:\r\n\r\n`DELETE http://hub/group/{name}`\r\n\r\nDELETE will return a 202, and it may take up to a minute to properly stop a group from servicing the callback.\r\n\r\n#### Behavior\r\n\r\nThe application listening at `callbackUrl` will get a payload POSTed to it for every new item in the channel, starting after `startItem` or at the time the group is created.\r\n200 is considered a successful response.  Any other response is considered an error, and will cause the server to retry.   Redirects are allowed.                                        \r\nRetries will use an exponential backoff up to one minute, and the server will continue to retry at one minute intervals indefinitely.\r\n\r\n``` json\r\n{\r\n  \"name\" : \"stumptownCallback\",\r\n  \"uris\" : [ \"http://hub/channel/stumptown/2014/01/13/10/42/31/759/s03ub2\" ]\r\n}\r\n```\r\n\r\n## provider interface\r\n\r\nFor external data providers, there is a simplified interface suitable for exposing to the authenticated outside world.\r\n\r\n`POST http://hub/provider/`\r\n\r\n* it creates a channel if it doesn't exist\r\n* it expects a `channelName` header\r\n* does not support any other HTTP methods\r\n* does not return any links\r\n* access by external data providers is controlled through a proxy maintained by Operations\r\n\r\n## delete a channel\r\n\r\n\r\nTo delete a channel when after you no longer need it, simply issue a `DELETE` command to that channel.\r\nDelete returns a 202, indicating that the request has been accepted, and will take an indeterminate time to process.\r\nIf you re-create a channel before all the data has been deleted, the behavior is undefined.\r\n\r\n `DELETE http://hub/channel/stumptown`\r\n\r\nHere's how you can do this with curl:\r\n```bash\r\ncurl -i -X DELETE http://hub/channel/stumptown\r\n```\r\n\r\n## replication\r\n\r\nThe hub can replicate a source channel from another hub instance into a destination channel.  The destination channel can have any name.\r\n\r\nTo configure replication, specify `replicationSource` when creating the new channel in the desired destination.\r\n\r\nTo stop replication, either delete the destination channel, or PUT the destination channel with a blank `replicationSource`.\r\n\r\nModifications to configuration takes effect immediately.\r\n\r\nReplication destination channels do not allow inserts.\r\n\r\n## alerts\r\n\r\nThe hub can send alerts based on the number of items in a channel, or how long a group callback is lagging a channel.\r\n\r\nFor channels, an alert is created if inserts in `source` `operator` `threshold` within `timeWindowMinutes`\r\neg: if inserts in stumptown <  100 within 20 minutes\r\n\r\nFor group callbacks, an alert is created if the callback `source` lags behind it's channel by `timeWindowMinutes`\r\neg: if the last completed callback to stumptownCallback is 10 minutes behind the last insert into it's channel\r\n\r\n* `name` _is case sensitive_, is limited to _48 characters_, and may only contain `a-z`, `A-Z`, `0-9` and underscore `_`.\r\n\r\n* `source` is the name of the channel or group to monitor\r\n\r\n* `serviceName` is a user defined end point for the alert, which could be an email address, service name, etc\r\n\r\n* `type` can be `channel` or `group`\r\n\r\n* `timeWindowMinutes` the period of time to evaluate\r\n\r\n* `operator` (channel only) can be `>=`, `>`, `==`, `<`, or `<=`\r\n\r\n* `threshold` (channel only) is the value to compare\r\n\r\n### create or change and alert\r\n\r\nAlerts can be created and changed with PUT \r\n\r\n`PUT http://hub/alert/stumptownAlert`\r\n\r\n* Content-type: application/json\r\n\r\n```json\r\n{\r\n    \"source\": \"stumptown\",\r\n    \"serviceName\": \"stumptown@example.com\",\r\n    \"timeWindowMinutes\": 5,\r\n    \"type\": \"channel\",\r\n    \"operator\": \"==\",\r\n    \"threshold\": 0\r\n}\r\n```\r\n\r\nOn success:  `HTTP/1.1 201 OK`\r\n\r\n```json\r\n{\r\n    \"name\": \"stumptownAlert\",\r\n    \"source\": \"stumptown\",\r\n    \"serviceName\": \"stumptown@example.com\",\r\n    \"timeWindowMinutes\": 5,\r\n    \"type\": \"channel\",\r\n    \"operator\": \"==\",\r\n    \"threshold\": 0\r\n    \"_links\": {\r\n        \"self\": {\r\n            \"href\": \"http://hub-v2.svc.prod/alert/stumptownAlert\"\r\n        },\r\n        \"status\": {\r\n            \"href\": \"http://hub-v2.svc.prod/alert/stumptownAlert/status\"\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n### channel alert status\r\n\r\nFollowing the status link from _links.status.href shows the channel history for the current state of the alert\r\n\r\n`GET http://hub-v2.svc.prod/alert/stumptownAlert/status`\r\n\r\n```json\r\n{\r\n    \"name\": \"stumptownAlert\",\r\n    \"period\": \"minute\",\r\n    \"alert\": true,\r\n    \"type\": \"channel\",\r\n    \"history\": [\r\n    {\r\n        \"href\": \"http://hub-v2.svc.prod/channel/stumptown/2015/06/17/19/21?stable=true\",\r\n        \"items\": 0\r\n    },\r\n    {\r\n        \"href\": \"http://hub-v2.svc.prod/channel/stumptown/2015/06/17/19/22?stable=true\",\r\n        \"items\": 0\r\n    },\r\n    {\r\n        \"href\": \"http://hub-v2.svc.prod/channel/stumptown/2015/06/17/19/23?stable=true\",\r\n        \"items\": 0\r\n    },\r\n    {\r\n        \"href\": \"http://hub-v2.svc.prod/channel/stumptown/2015/06/17/19/24?stable=true\",\r\n        \"items\": 0\r\n    },\r\n    {\r\n        \"href\": \"http://hub-v2.svc.prod/channel/stumptown/2015/06/17/19/25?stable=true\",\r\n        \"items\": 0\r\n    }\r\n    ],\r\n    \"_links\": {\r\n        \"self\": {\r\n            \"href\": \"http://hub-v2.svc.prod/alert/stumptownAlert/status\"\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n### group alert status\r\n\r\nFollowing the status link from _links.status.href shows the latest item in a channel, and the last completed callback for that group.\r\n\r\n`GET http://hub-v2.svc.prod/alert/stumptownGroup/status`\r\n\r\n```\r\n{\r\n    \"name\": \"stumptownGroup\",\r\n    \"alert\": false,\r\n    \"type\": \"group\",\r\n    \"history\": [\r\n        {\r\n        \"href\": \"http://hub-v2.svc.prod/channel/stumptown/2015/06/17/18/34/38/306/UqCNR4\",\r\n        \"name\": \"channelLatest\"\r\n        },\r\n        {\r\n        \"href\": \"http://hub-v2.svc.prod/channel/stumptown/2015/06/17/18/34/38/306/UqCNR4\",\r\n        \"name\": \"lastCompletedCallback\"\r\n        }\r\n    ],\r\n    \"_links\": {\r\n        \"self\": {\r\n            \"href\": \"http://hub-v2.svc.prod/alert/stumptownGroup/status\"\r\n        }\r\n    }\r\n}\r\n```\r\n## health check\r\n\r\nThe Health Check returns a 200 status code when the server can connect to each data store.\r\nIf the server can not access a data store, it will return a 500 status code.\r\n\r\nResponding to http connections is the last step on startup, so the health check will be unresponsive until startup is complete.\r\nOn shutdown, the server immediately stops responding to new http connections, so there are no separate codes for startup and shutdown.\r\n\r\n`GET http://hub/health`\r\n\r\n```json\r\n{\r\n  \"healthy\" : true,\r\n  \"description\" : \"OK\",\r\n  \"version\" : \"2014-03-26.126\"\r\n}\r\n```\r\n\r\n## access control\r\n\r\nCurrently, all access to the Hub is uncontrolled, and does not require authentication.\r\nOver time, access control will be added to some of the API, starting with Channel Deletion and Replication Management.\r\nTo request a change to a controlled API, or to request access, please use the [hub-discuss forum](https://groups.google.com/a/conducivetech.com/forum/#!forum/hub-discuss)\r\n\r\n## encrypted-hub\r\n\r\nThe Encrypted Hub (EH) is a separate installation of The Hub.\r\nEH also has some additional features to the normal Hub:\r\n\r\n* All channel items are encrypted at rest (this relies on disk level encryption)\r\n* All channel items are encrypted in flight\r\n* All access to channel items (reads and writes) require authentication and are access controlled\r\n\r\nChannel inserts can be audited by a GET or HEAD to each channel item.  The creator of the record is returned in a `User` header.\r\n\r\n## development\r\n\r\nThe Hub is a work in progress.  If you'd like to contribute, let us know.\r\n\r\n[Install locally](https://github.com/flightstats/hubv2/wiki/Install-hub-locally)\r\n\r\nGeneral Rules for Development:\r\n* Only pull from master\r\n* Create a new branch for features and bugs, avoiding '/' in the branch name\r\n* after testing, create a pull request from the feature branch to master\r\n\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}